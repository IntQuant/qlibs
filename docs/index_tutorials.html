<!DOCTYPE html>
<html>
<head>
     <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div class="sidenav">
        <p><a href="index.html">ðŸ”— Back</a></p>
<p><a href="#Vector-Tutorial">Vector Tutorial</a></p>
<p><a href="#Multiplexer-Tutorial">Multiplexer Tutorial</a></p>
    </div>
    <div class="main">
        <h1 id=Vector-Tutorial>Vector Tutorial</h1>
<h2>Overview</h2>
<p>Vectors are collections of numbers. They can be added, substracted, multiplied and divided, in addition to several useful methods. Because of that they are great for representing locations and directions.</p>
<h2>Creating vectors</h2>
<ul>
<li>Vec(iterable) - creates vector from iterable</li>
<li>Vec(*args) - creates vector as if args were an iterable, so that <code>Vec([0, 1])</code> and <code>Vec(0, 1)</code> are equal.</li>
<li>Vec2(x, y) - specialized vector class, which is faster(direct access to <strong>x</strong> and <strong>y</strong> fields) and is always two-dimensional.</li>
</ul>
<h2>Indexing</h2>
<p>First 4 components of vector can be accessed when they are present like this:</p>
<div class="highlight python"><pre><span></span><span class="kn">from</span> <span class="nn">qlibs.math</span> <span class="kn">import</span> <span class="n">Vec</span>
<span class="n">vec</span> <span class="o">=</span> <span class="n">Vec</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">vec</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">vec</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">vec</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">vec</span><span class="o">.</span><span class="n">w</span><span class="p">)</span>
<span class="c1">#Also possible to index like list</span>
<span class="k">assert</span> <span class="n">vec</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">vec</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">vec</span><span class="o">.</span><span class="n">z</span> <span class="o">==</span> <span class="n">vec</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">vec</span><span class="o">.</span><span class="n">w</span> <span class="o">==</span> <span class="n">vec</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
<h2>Operators</h2>
<div class="highlight python"><pre><span></span><span class="kn">from</span> <span class="nn">qlibs.math</span> <span class="kn">import</span> <span class="n">Vec</span>

<span class="n">v0</span> <span class="o">=</span> <span class="n">Vec</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">v1</span> <span class="o">=</span> <span class="n">Vec</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>

<span class="c1">#Plus and minus work elementwise</span>
<span class="k">print</span><span class="p">(</span><span class="n">v0</span><span class="o">+</span><span class="n">v1</span><span class="p">)</span> <span class="c1">#Vec(10, 25)</span>
<span class="k">print</span><span class="p">(</span><span class="n">v0</span><span class="o">-</span><span class="n">v1</span><span class="p">)</span> <span class="c1">#Vec(10, -15)</span>

<span class="c1">#You can multiply or divide vectors by vectors, only by numbers</span>
<span class="c1">#Resulting vector will have elements of first array with operations applied</span>
<span class="k">print</span><span class="p">(</span><span class="n">v0</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>  <span class="c1">#Vec(20, 10)</span>
<span class="k">print</span><span class="p">(</span><span class="n">v0</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>  <span class="c1">#Vec(5.0, 2.5)</span>
<span class="k">print</span><span class="p">(</span><span class="n">v0</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span> <span class="c1">#Vec(5, 2)</span>

<span class="c1">#Unary minus is also supported</span>
<span class="k">print</span><span class="p">(</span><span class="o">-</span><span class="n">v0</span><span class="p">)</span>   <span class="c1">#Vec(-10, -5)</span>

<span class="c1">#As well as abs()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="o">-</span><span class="n">v0</span><span class="p">))</span> <span class="c1"># Vec(10, 5)</span>

<span class="c1">#It is also possible to iterate for each element in vector, like list</span>
<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">v0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="c1">#Length of the vector (Note: to get number of dimensions len(vec) is required)</span>
<span class="k">print</span><span class="p">(</span><span class="n">v0</span><span class="o">.</span><span class="n">len</span><span class="p">())</span>    <span class="c1">#equal to math.hypot(v0.x, v0.y), but also works for more dimensions</span>
<span class="k">print</span><span class="p">(</span><span class="n">v0</span><span class="o">.</span><span class="n">len_sq</span><span class="p">())</span> <span class="c1">#v0.len()**2</span>

<span class="c1">#Calculates dot product of vectors</span>
<span class="k">print</span><span class="p">(</span><span class="n">v0</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">v1</span><span class="p">))</span>

<span class="c1">#Normalize divides vector by it&#39;s length, so it will have length of 1</span>
<span class="n">v0</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">v0</span><span class="o">.</span><span class="n">len</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>

<h1 id=Multiplexer-Tutorial>Multiplexer Tutorial</h1>
<h2>Overview</h2>
<p>This module implements lockstep based multiplayer.
There are two main classes: MultiplexServer and MultiplexClient, in addition to several event classes.</p>
<h2>MultiplexServer</h2>
<p>Server listens to client sockets, accepts connections and sends/recieves events from clients. It does not need to be configured, except giving it a port and optionally <strong>engine_packer</strong>.</p>
<p>Use <code>server_forever()</code> or <code>serve_in_thread()</code> to start it. Calling <code>stop_thread()</code> will stop it.</p>
<h2>MultiplexClient</h2>
<p>Requires engine instance to be initialized plus optional <strong>host</strong> and <strong>port</strong>.
Optional <strong>engine_constructor</strong> is required for engine reconstruction.</p>
<p>It's field <strong>min_step_time</strong> is <em>obviusly</em> responsible for minimal time between steps.</p>
<p>Engine class should have <code>step()</code> method, accepting dt and list of events:</p>
<div class="highlight python"><pre><span></span><span class="c1">#Example engine class</span>
<span class="k">class</span> <span class="nc">Engine</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">events</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;{dt} seconds elapsed from last step&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;playerjoined&quot;</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Played {event.player_id} joined&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;playerleft&quot;</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Player {event.player_id} left&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;payload&quot;</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Recieved data {event.data}&quot;</span><span class="p">)</span>
</pre></div>
<p><code>send_payload(data: bytes)</code> will create PayloadEvent with given data.</p>
<p>It can be run by using <code>run_in_thread()</code>. Calling <code>stop_thread()</code> will stop it.
Alternatively <code>step()</code> can be used in your mainloop.</p>
<h2>Events</h2>
<p>There are several types of events (their name field is given in brackets):</p>
<ul>
<li>PlayerJoinedEvent ("playerjoined")</li>
<li>PlayerLeftEvent ("playerleft")</li>
<li>PayloadEvent ("payload")</li>
<li>In addition to several non-public ones.</li>
</ul>
<p>All of them have <strong>player_id</strong> field which represents the player it belongs to(either the one who sent it or caused it)
PayloadEvent also has <strong>data</strong> field, containing the data it was created with.</p>
<p>First two event types are generated automatically generated by server. PayloadEvent is generated by client using <code>send_payload(data)</code> call.</p>

    </div> 
</body>
</html>